<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>ë¯¸ì—°ì‹œ - í™•ì¥ ë£¨íŠ¸ + í˜¸ê°ë„ ì‹œê°í™”</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            transition: background-image 1.5s ease-in-out;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #fff;
        }

        h1, p {
            text-shadow: 1px 1px 3px #0008;
        }

        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #eee;
            color: #333;
        }

        #affection-bar-container {
            width: 300px;
            height: 25px;
            border: 2px solid #fff;
            border-radius: 15px;
            overflow: hidden;
            background: #4449;
            margin-bottom: 20px;
            display: none;
        }

        #affection-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff6a6a, #ffbaba);
            transition: width 0.7s ease, background-color 0.7s ease;
        }

        #game {
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 10px;
            max-width: 600px;
        }

        .dialogue {
            margin-bottom: 20px;
            font-size: 1.3em;
            text-shadow: 1px 1px 3px #0008;
        }
    </style>
</head>
<body>

<h1>ğŸ® Choices of a Spring Day</h1>
<p>ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
<button onclick="startGame('yuri')">ğŸ“š ìœ ë¦¬</button>
<button onclick="startGame('hana')">ğŸ€ í•˜ë‚˜</button>
<button onclick="startGame('mina')">ğŸ¨ ë¯¸ë‚˜</button>

<div id="affection-bar-container">
    <div id="affection-bar"></div>
</div>

<div id="game"></div>

<script>
    const storyData = {
        yuri: [
            {
                text: "ë„ì„œê´€ì—ì„œ ìœ ë¦¬ê°€ ì±…ì„ ì½ê³  ìˆë‹¤.",
                choices: [
                    { text: "ë¬´ìŠ¨ ì±…ì´ì•¼?", affection: 1 },
                    { text: "ì¡°ìš©íˆ ì§€ë‚˜ê°„ë‹¤.", affection: 0 }
                ]
            },
            {
                text: "ìœ ë¦¬: ì´ ì±…, ì¢‹ì•„í•´?",
                choices: [
                    { text: "ì‘, ì¬ë°Œë”ë¼.", affection: 1 },
                    { text: "ê·¸ëƒ¥ ë„ˆí•œí…Œ ê´€ì‹¬ ìˆì–´ì„œ.", affection: 2 }
                ]
            },
            {
                text: "ìœ ë¦¬: ë‹¤ìŒ ì£¼ ì‹œí—˜ ê³µë¶€ ê°™ì´ í• ë˜?",
                choices: [
                    { text: "ì¢‹ì•„, ê°™ì´ í•˜ì.", affection: 2 },
                    { text: "ë¯¸ì•ˆ, ì´ë²ˆ ì£¼ëŠ” ë°”ë¹ ì„œ...", affection: 0 }
                ]
            },
            {
                text: "ìœ ë¦¬: ë„ˆë‘ ìˆìœ¼ë©´ ë§ˆìŒì´ í¸í•´.",
                choices: [
                    { text: "ë‚˜ë„ ê·¸ë˜.", affection: 2 },
                    { text: "ê·¸ëƒ¥ ì¹œêµ¬ë¡œ ìƒê°í•´ì¤˜.", affection: 0 }
                ]
            }
        ],
        hana: [
            {
                text: "í•˜ë‚˜ê°€ ë†êµ¬ ì—°ìŠµ ì¤‘ì´ë‹¤.",
                choices: [
                    { text: "ì™€, ì •ë§ ì˜í•œë‹¤!", affection: 1 },
                    { text: "ë°©í•´í• ê¹Œë´ ê·¸ëƒ¥ ê°€ì•¼ê² ë‹¤.", affection: 0 }
                ]
            },
            {
                text: "í•˜ë‚˜: ì²´ìœ¡ëŒ€íšŒ ì—°ìŠµ ë„ì™€ì¤„ë˜?",
                choices: [
                    { text: "ì¢‹ì•„! ê°™ì´ í•˜ì", affection: 2 },
                    { text: "ë¯¸ì•ˆ, ë‚˜ëŠ” ìš´ë™ ì˜ ëª»í•´ì„œâ€¦", affection: -1 }
                ]
            },
            {
                text: "í•˜ë‚˜: ë„¤ê°€ ì™€ì„œ í˜ì´ ë‚¬ì–´.",
                choices: [
                    { text: "ì–¸ì œë“ ì§€!", affection: 2 },
                    { text: "ë‚´ê°€ ì˜í•´ì„œ ê·¸ëŸ° ê±° ì•„ëƒ.", affection: 0 }
                ]
            },
            {
                text: "í•˜ë‚˜: ë‹¤ìŒ ê²½ê¸°, ê°™ì´ ê¼­ ì´ê¸°ì!",
                choices: [
                    { text: "ë‹¹ì—°í•˜ì§€!", affection: 2 },
                    { text: "ë‚œ ê·¸ëƒ¥ ì‘ì›í• ê²Œ.", affection: 0 }
                ]
            }
        ],
        mina: [
            {
                text: "ë¯¸ìˆ ì‹¤ì—ì„œ ë¯¸ë‚˜ê°€ ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ìˆë‹¤.",
                choices: [
                    { text: "ì´ ê·¸ë¦¼, ì •ë§ ë©‹ì§€ë‹¤.", affection: 1 },
                    { text: "ë¯¸ì•ˆ, ë°©í•´í–ˆë‚˜ ë´.", affection: 0 }
                ]
            },
            {
                text: "ì˜¥ìƒì—ì„œ í•˜ëŠ˜ì„ ë°”ë¼ë³´ëŠ” ë¯¸ë‚˜",
                choices: [
                    { text: "ëì—†ëŠ” ììœ ?", affection: 2 },
                    { text: "ê·¸ëƒ¥ ë¹„í–‰ê¸° ì§€ë‚˜ê°€ë„¤.", affection: 0.5 }
                ]
            },
            {
                text: "ë¯¸ë‚˜: ë„ˆë„ ê·¸ë¦¼ í•œë²ˆ ê·¸ë ¤ë³¼ë˜?",
                choices: [
                    { text: "ì¢‹ì•„, ê°€ë¥´ì³ì¤˜.", affection: 2 },
                    { text: "ë‚œ ê¸€ ì“°ëŠ” ê²Œ ë” ì¢‹ì•„.", affection: 0 }
                ]
            },
            {
                text: "ë¯¸ë‚˜: ë„ˆë‘ í•¨ê»˜í•œ ì‹œê°„, ì†Œì¤‘í•´.",
                choices: [
                    { text: "ë‚˜ë„ ê³ ë§ˆì›Œ.", affection: 2 },
                    { text: "ìš°ë¦¬ ì¹œêµ¬ë¡œ ë‚¨ì.", affection: 0 }
                ]
            }
        ]
    };

    const backgrounds = {
        yuri: "url('https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1280&q=80')",
        hana: "url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1280&q=80')",
        mina: "url('https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=1280&q=80')"
    };

    let player = {
        route: '',
        affection: { yuri: 0, hana: 0, mina: 0 },
        sceneIndex: 0
    };

    const affectionBarContainer = document.getElementById("affection-bar-container");
    const affectionBar = document.getElementById("affection-bar");

    function startGame(route) {
        player.route = route;
        player.sceneIndex = 0;
        player.affection[route] = 0;

        affectionBarContainer.style.display = "block";
        updateBackground(route);
        updateAffectionBar();

        document.getElementById("game").innerHTML = "";
        renderScene();
    }

    function updateBackground(route) {
        document.body.style.backgroundImage = backgrounds[route] || '';
    }

    function renderScene() {
        const scene = storyData[player.route][player.sceneIndex];
        const container = document.getElementById("game");
        let html = `<div class="dialogue">${scene.text}</div>`;
        scene.choices.forEach((choice, i) => {
            html += `<button onclick="makeChoice(${i})">${choice.text}</button>`;
        });
        container.innerHTML = html;
    }

    function updateAffectionBar() {
        let score = player.affection[player.route];
        if(score < 0) score = 0;
        if(score > 8) score = 8; // í™•ì¥ëœ ìµœëŒ€ 8ì 

        // 0~8 ì  ë²”ìœ„ â†’ 0~100% ë„ˆë¹„ ë³€í™˜
        const percent = (score / 8) * 100;
        affectionBar.style.width = percent + "%";

        // ì ìˆ˜ì— ë”°ë¼ ìƒ‰ ë³€í™”
        if (percent > 80) {
            affectionBar.style.background = "linear-gradient(90deg, #ff5f6d, #ffc371)";
        } else if (percent > 60) {
            affectionBar.style.background = "linear-gradient(90deg, #ffb347, #ffcc33)";
        } else if (percent > 40) {
            affectionBar.style.background = "linear-gradient(90deg, #fceabb, #f8b500)";
        } else if (percent > 20) {
            affectionBar.style.background = "linear-gradient(90deg, #b3ffab, #12fff7)";
        } else {
            affectionBar.style.background = "linear-gradient(90deg, #74ebd5, #acb6e5)";
        }
    }

    function makeChoice(choiceIndex) {
        const currentScene = storyData[player.route][player.sceneIndex];
        const affectionGain = currentScene.choices[choiceIndex].affection;
        player.affection[player.route] += affectionGain;
        player.sceneIndex++;

        updateAffectionBar();

        if (player.sceneIndex >= storyData[player.route].length) {
            showEnding();
        } else {
            renderScene();
        }
    }

    function showEnding() {
        const score = player.affection[player.route];
        let result = "";
        if (score >= 6) {
            result = "ğŸ’– í•´í”¼ì—”ë”©! ì§„ì‹¬ì´ ì „í•´ì¡Œì–´.";
        } else if (score >= 3) {
            result = "ğŸ™‚ ì¢‹ì€ ì¹œêµ¬ê°€ ë˜ì—ˆë‹¤.";
        } else {
            result = "ğŸ’” ì¸ì—°ì€ ê±°ê¸°ê¹Œì§€ì˜€ë˜ ê²ƒ ê°™ë‹¤.";
        }

        document.getElementById("game").innerHTML = `
    <p style="font-size:1.5em;">${result}</p>
    <button onclick="location.reload()">ë‹¤ì‹œí•˜ê¸°</button>
  `;

        affectionBarContainer.style.display = "none";
    }
</script>

</body>
</html>
